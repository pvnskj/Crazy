<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sphoorthy Masa - Senior UX Researcher (Portfolio)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Great+Vibes&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* --- "Cascade Breeze" Theme Palette --- */
        :root {
            --color-bg: #f2fbff;
            --color-surface: #ffffff;
            --color-primary: #0ea5e9;
            --color-primary-hover: #0284c7;
            --color-text-primary: #0f172a;
            --color-text-secondary: #475569;
            --color-border: #cfe8f6;
            --color-accent-soft: rgba(14, 165, 233, 0.12);
            --color-accent-strong: rgba(14, 165, 233, 0.2);
        }
        body{
            font-family:'Inter',sans-serif;
            color: var(--color-text-secondary);
            background-color: var(--color-bg);
            position: relative;
        }
        body::before { display: none; }
        #bg-canvas { display: none; }
        .content-container{
            position:relative;
            z-index:1;
            background-color: var(--color-bg);
            overflow-x: hidden;
        }
        /* --- Header --- */
        header{
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: linear-gradient(to bottom, rgba(255,255,255,0.95), rgba(242,251,255,0.88));
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-bottom: 1px solid var(--color-border);
            transition: transform .4s ease-out;
        }
        header.hidden{transform:translateY(-120%)}
        .header-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        .header-logo {
            font-family:'Inter',sans-serif;
            font-size: 1.75rem;
            color: var(--color-primary);
            font-weight: 800;
            letter-spacing: -0.5px;
        }
        header nav a {
            color: var(--color-text-secondary);
            font-weight: 600;
            padding: 0.5rem 0.75rem;
            border-radius: 4px;
            transition: color 0.2s ease, background-color 0.2s ease;
        }
        header nav a:hover {
            color: var(--color-primary);
            background-color: var(--color-accent-soft);
        }
        header nav a:focus-visible {
            outline: 3px solid var(--color-accent-strong);
            outline-offset: 2px;
            color: var(--color-primary);
            background-color: var(--color-accent-soft);
        }
        /* --- Hero Carousel --- */
        #hero-carousel {
            width: 100%;
            padding: 120px 5% 60px; /* Offset for fixed header */
            position: relative;
        }
        .hero-track {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        .hero-card {
            background: var(--color-surface);
            border-radius: 16px;
            border: 1px solid var(--color-border);
            box-shadow: 0 18px 45px rgba(15, 23, 42, 0.08);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .hero-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 24px 55px rgba(15, 23, 42, 0.12);
        }
        .hero-card .hero-image-container {
            height: 220px;
            width: 100%;
        }
        .hero-card .hero-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .hero-card .hero-content {
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            height: 100%;
            flex: 1;
        }
        .hero-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .hero-meta span {
            background-color: var(--color-accent-soft);
            color: var(--color-primary);
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.35rem 0.75rem;
            border-radius: 9999px;
        }
        @media (max-width: 1023px) {
            .hero-track {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
            .hero-card .hero-image-container {
                height: 200px;
            }
        }
        @media (max-width: 767px) {
            #hero-carousel {
                padding: 100px 1.5rem 40px;
            }
            .hero-track {
                grid-template-columns: 1fr;
            }
            .hero-card .hero-image-container {
                height: 180px;
            }
        }
        .hero-content h2 {
            font-size: clamp(1.5rem, 2.8vw, 2.5rem);
            font-weight: 800;
            color: var(--color-text-primary);
            line-height: 1.1;
        }
        .hero-content p {
            font-size: clamp(0.95rem, 1.4vw, 1.1rem);
            color: var(--color-text-secondary);
            margin-top: 0.25rem;
        }
        .hero-buttons {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            margin-top: auto;
            padding-top: 0.75rem;
        }
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .btn-primary {
            background-color: var(--color-primary);
            color: white;
        }
        .btn-primary:hover {
            background-color: var(--color-primary-hover);
            transform: scale(1.03);
            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.35);
        }
        .btn:focus-visible {
            outline: 3px solid var(--color-accent-strong);
            outline-offset: 3px;
        }
        /* --- REMOVED: Project Carousel Section --- */
        #portfolio { display: none; }
        /* --- Content Sections --- */
        .content-section {
            padding: 3rem 5%;
            max-width: 1400px;
            margin: 0 auto;
        }
        .content-section-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--color-text-primary);
            margin-bottom: 2rem;
            text-align: center;
        }
        .card {
            background: var(--color-surface);
            border-radius: 12px;
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            padding: 2.5rem;
        }
        .about-card {
            padding: clamp(2rem, 4vw, 3.5rem);
        }
        .about-photo-wrapper {
            display: flex;
            justify-content: center;
        }
        .about-photo-frame {
            position: relative;
            width: min(320px, 100%);
            aspect-ratio: 3 / 4;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 20px 45px rgba(0,0,0,0.12);
        }
        .about-photo-frame::after {
            content: "";
            position: absolute;
            inset: 0;
            border: 2px solid rgba(255,255,255,0.5);
            border-radius: inherit;
            pointer-events: none;
        }
        .about-photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .about-photo-label {
            position: absolute;
            left: 1.25rem;
            bottom: 1.25rem;
            background: rgba(20,20,20,0.85);
            color: #fff;
            padding: 0.35rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.8125rem;
            font-weight: 600;
            letter-spacing: 0.02em;
        }
        .about-highlights {
            display: grid;
            gap: 1rem;
        }
        @media (min-width: 640px) {
            .about-highlights {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
        @media (min-width: 1024px) {
            .about-highlights {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
        .about-highlight {
            background: linear-gradient(135deg, rgba(14,165,233,0.16), rgba(14,165,233,0.06));
            border: 1px solid rgba(14,165,233,0.25);
            border-radius: 12px;
            padding: 1.25rem;
            height: 100%;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .about-highlight h4 {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--color-text-primary);
        }
        .about-highlight p {
            font-size: 0.95rem;
            color: var(--color-text-secondary);
            line-height: 1.5;
        }
        @media (max-width: 767px) {
            .about-photo-wrapper {
                order: -1;
                margin-bottom: 1.5rem;
            }
            .about-photo-frame {
                width: min(280px, 80vw);
            }
        }
        /* Cascade Breeze Competency Tags */
        .bg-black\/10.text-lime-400 {
            background-color: var(--color-accent-soft) !important;
            color: var(--color-primary) !important;
            border: 1px solid var(--color-accent-strong) !important;
            font-weight: 500;
        }
        /* Cascade Breeze Skill Tags */
        .tag-badge {
            background-color: var(--color-accent-soft);
            color: var(--color-primary);
            font-size: .75rem;
            font-weight: 500;
            padding: .25rem .75rem;
            border-radius: 9999px;
            border: 1px solid var(--color-accent-strong);
        }
        /* Cascade Breeze Skills blocks */
        .p-6.bg-gray-800\/50 {
            background: rgba(0,0,0,0.02);
            border: 1px solid var(--color-border);
        }
        /* --- Contact Button Styles --- */
        a[href^="mailto:"] {} /* Clear old generic style */
        .btn-contact {
            display: inline-block;
            width: 100%;
            font-weight: 600;
            padding: 1rem 2.5rem; /* py-4 px-10 */
            font-size: 1.125rem; /* text-lg */
            border-radius: 8px; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); /* shadow-lg */
            transition: all 0.2s ease;
            text-align: center;
        }
        @media (min-width: 640px) { /* sm: */
            .btn-contact {
                width: auto;
            }
        }
        .btn-email {
            background-color: var(--color-primary);
            color: white;
        }
        .btn-email:hover {
            background-color: var(--color-primary-hover);
            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.35);
            transform: scale(1.03);
        }
        .btn-linkedin {
            background-color: #0077B5;
            color: white;
        }
        .btn-linkedin:hover {
            background-color: #005e9c;
            box-shadow: 0 4px 15px rgba(0, 119, 181, 0.3);
            transform: scale(1.03);
        }
        /* --- Cascade Breeze Testimonials --- */
        .testimonial-scroller{max-width:1200px;margin:auto;overflow:hidden;-webkit-mask:linear-gradient(90deg,transparent,black 20%,black 80%,transparent);mask:linear-gradient(90deg,transparent,black 20%,black 80%,transparent)}
        .scroller-inner{display:flex;gap:1.5rem;width:max-content;animation:scroll 90s linear infinite}
        .testimonial-scroller:hover .scroller-inner{animation-play-state:paused}
        @keyframes scroll{to{transform:translateX(calc(-50% - .75rem))}}
        /* UPDATED: Testimonial Card Styling */
        .testimonial-card {
            width: 380px;
            height: 300px; /* Fixed height */
            min-height: auto;
            background: var(--color-surface);
            border-radius: 12px;
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Pushes content */
            padding: 1.5rem; /* Use padding from .panel */
        }
        .testimonial-card p.italic {
            flex-grow: 1; /* Allows this to fill space */
            overflow-y: auto; /* Adds scroll if content is too long */
            text-align: left; /* Better for reading/scrolling */
            padding-right: 10px; /* Space for scrollbar */
            margin-bottom: 1rem;
            /* Scrollbar styling */
            scrollbar-width: thin;
            scrollbar-color: var(--color-border) var(--color-surface);
        }
        .testimonial-card p.italic::-webkit-scrollbar {
            width: 6px;
        }
        .testimonial-card p.italic::-webkit-scrollbar-track {
            background: var(--color-surface);
        }
        .testimonial-card p.italic::-webkit-scrollbar-thumb {
            background-color: var(--color-border);
            border-radius: 6px;
        }
        .testimonial-card .author-info {
            text-align: center;
            flex-shrink: 0; /* Prevents this from shrinking */
        }
        /* End Testimonial Update */
        .panel {
            background: var(--color-surface);
            border-radius: 12px;
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: box-shadow .3s ease;
            padding: 1.5rem;
        }
        .panel:hover { box-shadow: 0 8px 32px 0 rgba(0,0,0,0.1); }
        .text-black { color: var(--color-text-primary) !important; }
        .text-gray-300, .text-gray-400 { color: var(--color-text-secondary) !important; }
        .text-lime-400 { color: var(--color-primary) !important; }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        /* --- Project Modal --- */
        #project-modal {
            position: fixed;
            inset: 0;
            z-index: 999;
            display: none;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            animation: fadeIn .3s ease;
        }
        #project-modal.open { display: grid; place-items: center; }
        .modal-content {
            position: relative;
            width: min(95vw, 1100px);
            height: min(90vh, 900px);
            background: var(--color-surface);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: slideIn .4s ease-out;
        }
        .modal-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--color-border);
            position: relative;
        }
        .modal-header h3 {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--color-text-primary);
        }
        .modal-close-btn {
            position: absolute;
            top: 1.25rem;
            right: 1.25rem;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            color: var(--color-text-secondary);
            font-size: 1.5rem;
            line-height: 1;
            cursor: pointer;
            transition: all .2s ease;
        }
        .modal-close-btn:hover {
            background: var(--color-accent-soft);
            color: var(--color-primary-hover);
            transform: scale(1.05);
        }
        .modal-close-btn:focus-visible {
            outline: 3px solid var(--color-accent-strong);
            outline-offset: 3px;
        }
        .modal-body {
            padding: 2rem;
            overflow-y: auto;
            flex-grow: 1;
        }
        /* --- Modal Content Styling --- */
        .modal-body h4 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-text-primary);
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }
        .modal-body h4:first-child {
            margin-top: 0;
        }
        .modal-body h5 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 0.25rem;
        }
        .modal-body p {
            color: var(--color-text-secondary);
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        .modal-body ul {
            list-style-type: disc;
            margin-left: 1.25rem;
            color: var(--color-text-secondary);
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        .modal-body .methodology-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }
        .modal-body .methodology-item,
        .modal-body .insight-card {
            background: #fafafa;
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 1.25rem;
        }
        .modal-body .stat-card {
            background: #fafafa;
            border: 1px solid var(--color-border);
            border-left: 4px solid var(--color-primary);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }
        .modal-body .stat-card .stat-number {
            font-size: 2.25rem;
            font-weight: 800;
            color: var(--color-primary);
            line-height: 1;
        }
        .modal-body .stat-card .stat-description {
            font-size: .875rem;
            margin-top: .5rem;
            color: var(--color-text-secondary);
        }
        .modal-body .bg-black\/20 {
            background: #fafafa;
            border: 1px solid var(--color-border);
        }
        .modal-body .text-lime-200 { /* Override old class */
            color: #777;
            font-style: italic;
        }
        .modal-body table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .modal-body th, .modal-body td {
            padding: 0.75rem 1rem;
            border: 1px solid var(--color-border);
            text-align: left;
            color: var(--color-text-secondary);
        }
        .modal-body th {
            background-color: #fafafa;
            color: var(--color-text-primary);
            font-weight: 600;
        }
        .modal-body .font-bold.text-lime-400 {
            color: var(--color-primary) !important;
            font-weight: 600;
        }
        /* --- End Modal Content Styling --- */
        .metric-card {
            background: #fafafa;
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }
        .metric-card-value {
            font-size: 2.25rem;
            line-height: 1;
            font-weight: 800;
            color: var(--color-primary);
        }
        .metric-card-label {
            font-size: .9rem;
            color: var(--color-text-secondary);
            margin-top: 0.25rem;
        }
        .details-tabs {
            border-bottom: 1px solid var(--color-border);
        }
        .details-tabs button {
            padding: .75rem 0.25rem;
            margin-right: 1.5rem;
            font-weight: 600;
            color: var(--color-text-secondary);
            border-bottom: 3px solid transparent;
            transition: all .3s;
        }
        .details-tabs button.active {
            color: var(--color-text-primary);
            border-bottom-color: var(--color-primary);
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: contentFadeIn .5s ease; }
        /* --- Animation & Utility --- */
        @keyframes fadeIn{from{opacity:0}to{opacity:1}}
        @keyframes contentFadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        @keyframes slideIn{from{opacity:0;transform:translateY(30px) scale(0.98)}to{opacity:1;transform:translateY(0) scale(1)}}
        
        /* --- Chatbot Widget --- */
        /* This CSS was already in your file (lines 535-645) - No changes needed here */
        .chat-launcher {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 80;
            background: var(--color-primary);
            color: #fff;
            border: none;
            border-radius: 999px;
            padding: 0.85rem 1.5rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 700;
            box-shadow: 0 15px 35px rgba(14, 165, 233, 0.35);
            cursor: pointer;
            transition: transform 0.25s ease, box-shadow 0.25s ease;
        }
        .chat-launcher svg {
            width: 1.25rem;
            height: 1.25rem;
        }
        .chat-launcher:hover {
            transform: translateY(-4px);
            box-shadow: 0 18px 38px rgba(14, 165, 233, 0.45);
        }
        .chat-launcher:focus-visible {
            outline: 3px solid var(--color-accent-strong);
            outline-offset: 4px;
        }
        .chat-panel {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: min(360px, 90vw);
            background: var(--color-surface);
            border-radius: 16px;
            border: 1px solid var(--color-border);
            box-shadow: 0 25px 60px rgba(0,0,0,0.18);
            transform: translateX(calc(100% + 3rem));
            transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1);
            z-index: 90;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            pointer-events: none;
        }
        .chat-panel.open {
            transform: translateX(0);
            pointer-events: auto;
        }
        .chat-panel__header {
            background: linear-gradient(135deg, rgba(14,165,233,0.95), rgba(8,145,178,0.85));
            color: #fff;
            padding: 1.25rem 1.5rem 1rem;
            position: relative;
        }
        .chat-panel__header h3 {
            font-size: 1.1rem;
            font-weight: 700;
            margin: 0;
        }
        .chat-panel__header p {
            font-size: 0.85rem;
            margin-top: 0.35rem;
            opacity: 0.88;
        }
        .chat-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.35);
            color: #fff;
            display: grid;
            place-items: center;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        .chat-close:hover {
            background: rgba(255,255,255,0.4);
            color: var(--color-primary-hover);
        }
        .chat-close:focus-visible {
            outline: 3px solid rgba(255,255,255,0.75);
            outline-offset: 3px;
        }
        .chat-body {
            padding: 1rem 1.25rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .chat-messages {
            max-height: 280px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            padding-right: 0.25rem;
        }
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(14, 165, 233, 0.3);
            border-radius: 999px;
        }
        .chat-message {
            display: inline-flex;
            align-items: flex-start;
            gap: 0.75rem;
        }
        .chat-message__bubble {
            padding: 0.75rem 1rem;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            line-height: 1.4;
            font-size: 0.95rem;
            white-space: pre-wrap;
        }
        .chat-message.assistant .chat-message__bubble {
            background: var(--color-accent-soft);
            color: var(--color-text-primary);
            border: 1px solid var(--color-accent-strong);
        }
        .chat-message.user {
            justify-content: flex-end;
        }
        .chat-message.user .chat-message__bubble {
            background: var(--color-primary);
            color: #fff;
            border-radius: 14px 14px 2px 14px;
        }
        .chat-form {
            border-top: 1px solid var(--color-border);
            background: rgba(0,0,0,0.015);
            padding: 0.85rem 1.25rem 1.25rem;
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 0.75rem;
        }
        .chat-form input[type="text"] {
            background: #fff;
            border: 1px solid var(--color-border);
            border-radius: 999px;
            padding: 0.65rem 1rem;
            font-size: 0.95rem;
            color: var(--color-text-primary);
        }
        .chat-form input[type="text"]:focus {
            outline: none;
            border-color: rgba(14, 165, 233, 0.6);
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);
        }
        .chat-submit {
            background: var(--color-primary);
            color: #fff;
            border: none;
            border-radius: 999px;
            padding: 0.65rem 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .chat-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(14, 165, 233, 0.35);
        }
        .chat-submit:focus-visible {
            outline: 3px solid var(--color-accent-strong);
            outline-offset: 3px;
        }
        .chat-status {
            font-size: 0.75rem;
            color: var(--color-text-secondary);
            text-align: center;
        }
        @media (max-width: 640px) {
            .chat-launcher {
                right: 1.25rem;
                bottom: 1.5rem;
            }
            .chat-panel {
                right: 0.75rem;
                bottom: 1.5rem;
            }
        }
        .reveal{opacity:0;transform:translateY(50px);transition:opacity .8s ease-out,transform .8s ease-out}
        .reveal.visible{opacity:1;transform:translateY(0)}
        .main-container{max-width:1400px; margin: 0 auto;}
        /* --- Media carousel styles (for inside modal) --- */
        .media-viewer{position:relative;width:100%;max-width:1100px;margin-inline:auto}
        .media-stage{
            position:relative;
            width:100%;
            aspect-ratio:16/9;
            border-radius:12px; /* Rounded edges */
            overflow:hidden;
            background:var(--color-bg); /* Clean bg */
            display:grid;
            place-items:center;
        }
        .media-stage img{width:100%;height:100%;object-fit:contain;cursor:zoom-in;user-select:none;-webkit-user-drag:none}
        .media-controls{position:absolute;inset:0;display:flex;align-items:center;justify-content:space-between;padding:.75rem;pointer-events:none}
        .media-btn{pointer-events:auto;width:42px;height:42px;display:grid;place-items:center;border-radius:9999px;background:rgba(255,255,255,.85);border:1px solid rgba(0,0,0,.1);color:#0f172a;cursor:pointer;transition:transform .15s ease,background .15s ease,opacity .15s ease;backdrop-filter:blur(8px) saturate(160%)}
        .media-btn:hover{transform:scale(1.06);background:#fff}
        .media-btn:disabled{opacity:.4;cursor:not-allowed}
        .media-meta{margin-top:.6rem;display:flex;align-items:center;justify-content:space-between;gap:.75rem;color:#334155}
        .media-pager{font-variant-numeric:tabular-nums;opacity:.85}
        .lightbox{position:fixed;inset:0;z-index:9999;display:none;background:rgba(9,12,16,.75);backdrop-filter:blur(6px) saturate(140%)}
        .lightbox.open{display:grid}
        .lightbox-inner{position:relative;width:min(96vw,1400px);height:min(92vh,860px);margin:auto;display:grid;grid-template-rows:1fr auto;gap:.75rem}
        .lightbox-stage{position:relative;width:100%;height:100%;border-radius:16px;overflow:hidden;background:#0b1020;display:grid;place-items:center;border:1px solid rgba(255,255,255,.15)}
        .lightbox-stage img{width:100%;height:100%;object-fit:contain;user-select:none;-webkit-user-drag:none}
        .lightbox-controls{position:absolute;inset:0;display:flex;align-items:center;justify-content:space-between;padding:1rem;pointer-events:none}
        .lightbox-btn{pointer-events:auto;width:46px;height:46px;border-radius:9999px;display:grid;place-items:center;background:rgba(255,255,255,.9);border:1px solid rgba(0,0,0,.15);color:#0f172a;cursor:pointer;transition:transform .15s ease,background .15s ease;backdrop-filter:blur(8px) saturate(160%)}
        .lightbox-btn:hover{transform:scale(1.06);background:#fff}
        .lightbox-topbar{display:flex;justify-content:space-between;align-items:center;color:#e5e7eb;font-size:.95rem}
        .lightbox-topbar .close{width:42px;height:42px;border-radius:9999px;display:grid;place-items:center;background:rgba(255,255,255,.88);color:#0f172a;border:1px solid rgba(0,0,0,.12);cursor:pointer;transition:transform .15s ease,background .15s ease}
        .lightbox-topbar .close:hover{transform:scale(1.06);background:#fff}
    </style>
</head>
<body class="antialiased" data-chat-store="https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec">

    <div class="content-container">
        <header>
            <div class="header-inner">
                <a href="#" class="header-logo">Sphoorthy Masa</a>
                <nav class="hidden md:flex space-x-6 text-base font-medium items-center">
                    <a href="#about">About</a>
                    <a href="#skills">Skills</a>
                    <a href="#testimonials">Testimonials</a>
                    <a href="#why-me-contact">Contact</a>
                </nav>
            </div>
        </header>

        <main>
            <section id="hero-carousel" class="reveal">
                <div class="hero-track"></div>
            </section>

            <div class="main-container">
                <section id="about" class="content-section reveal">
                    <div class="card about-card">
                        <div class="grid lg:grid-cols-[1fr,1.25fr] gap-12 items-center">
                            
                            </div>
                    </div>
                </section>
                </div>
        </main>
    </div>

    <button class="chat-launcher" id="chat-launcher" aria-expanded="false" aria-controls="chat-panel">
        <i class="fas fa-robot"></i>
        Chat with Sporty
    </button>

    <div class="chat-panel" id="chat-panel">
        <div class="chat-panel__header">
            <h3>Sporty - AI UX Assistant</h3>
            <p>Ask anything about Sphoorthy Masa's work or experience.</p>
            <button class="chat-close" id="chat-close" aria-label="Close Chat">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chat-body" style="height: 300px; flex-shrink: 0;">
            <div class="chat-messages" id="chat-messages">
                <div class="chat-message assistant">
                    <div class="chat-message__bubble">
                        Hello! I'm Sporty, a specialized AI powered by Gemini Flash. I can instantly analyze Sphoorthy Masa's portfolio and the wider web to answer your questions.
                    </div>
                </div>
            </div>
        </div>
        <form class="chat-form" id="chat-form">
            <input type="text" placeholder="Ask me a question..." id="chat-input" required aria-label="Chat Input">
            <button type="submit" class="chat-submit" id="chat-submit" aria-label="Send Message">Send</button>
        </form>
        <div class="chat-status" id="chat-status">Powered by **Gemini Flash** + Portfolio Knowledge Base</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // ### THIS IS THE LINE YOU MUST CHANGE LATER ###
            // This URL must point to your secure backend server, which holds your API key.
            const CHAT_API_ENDPOINT = 'YOUR_SECURE_BACKEND_URL/api/chat-sporty';

            // --- Get all the chatbot elements ---
            const launcher = document.getElementById('chat-launcher');
            const panel = document.getElementById('chat-panel');
            const closeBtn = document.getElementById('chat-close');
            const form = document.getElementById('chat-form');
            const input = document.getElementById('chat-input');
            const messagesContainer = document.getElementById('chat-messages');

            // --- 1. UI Logic (Open/Close) ---
            if (launcher && panel) {
                launcher.addEventListener('click', () => {
                    panel.classList.toggle('open');
                    launcher.style.display = panel.classList.contains('open') ? 'none' : 'inline-flex';
                    if (panel.classList.contains('open')) {
                        scrollToBottom();
                        input.focus();
                    }
                });

                closeBtn.addEventListener('click', () => {
                    panel.classList.remove('open');
                    launcher.style.display = 'inline-flex';
                });
            }

            // --- 2. Helper Functions (Scroll/Add Message) ---
            function scrollToBottom() {
                if (messagesContainer) {
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }
            }

            function addMessage(text, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `chat-message ${sender}`;
                messageDiv.innerHTML = `<div class="chat-message__bubble">${text}</div>`;
                if (messagesContainer) {
                    messagesContainer.appendChild(messageDiv);
                    scrollToBottom();
                }
            }

            // --- 3. Core Chat Logic (Form Submission) ---
            if (form) {
                form.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const userQuery = input.value.trim();
                    if (!userQuery) return;

                    addMessage(userQuery, 'user');
                    input.value = ''; 
                    input.disabled = true;

                    // Display loading indicator
                    const loadingIndicator = document.createElement('div');
                    loadingIndicator.id = 'loading-sporty';
                    loadingIndicator.className = 'chat-message assistant';
                    loadingIndicator.innerHTML = '<div class="chat-message__bubble">...Sporty is consulting the knowledge base</div>';
                    messagesContainer.appendChild(loadingIndicator);
                    scrollToBottom();
                    
                    try {
                        // Make the secure server-side API call
                        const responseText = await getSportyResponse(userQuery);
                        const statusIndicator = document.getElementById('loading-sporty');
                        if (statusIndicator) messagesContainer.removeChild(statusIndicator);
                        addMessage(responseText, 'assistant');

                    } catch (error) {
                        console.error("Sporty API Error:", error);
                        const statusIndicator = document.getElementById('loading-sporty');
                        if (statusIndicator) messagesContainer.removeChild(statusIndicator);
                        // This error is what your users will see until the backend is live
                        addMessage("Sorry, I'm having trouble connecting to my brain! The backend endpoint might not be configured yet.", 'assistant');
                    } finally {
                        input.disabled = false;
                        input.focus();
                    }
                });
            }

            // --- 4. Function to Call Your Backend ---
            async function getSportyResponse(query) {
                const response = await fetch(CHAT_API_ENDPOINT, { 
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query: query })
                });

                if (!response.ok) {
                    let errorText = `Server error (status ${response.status}). Check the console.`;
                    try {
                        const errorJson = await response.json();
                        errorText = errorJson.error || errorText;
                    } catch {}
                    throw new Error(errorText);
                }
                
                const data = await response.json();
                return data.text || "I received a response, but it was empty."; 
            }
        });
    </script>

</body>
</html>
